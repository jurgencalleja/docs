---
title: Hosted Payment Page
position_number: 4
type: post
description: The purpose of this document is to describe the AUTH/PURCHASE/VERIFY (Hosted Payment Page Integration) API Operation to enable merchant developers to integrate their webpages with the IPG Gateway.  Refer to the IPG Gateway – 0 – Overview document for how this API Operation is used in the merchant processes.. The AUTH/PURCHASE/VERIFY (Hosted Payment Page Integration) API Operation allows the merchant using the Hosted Payment Page or Shopping Cart Plugins Integration Method to send customer authorise and purchase payment card transactions, or payment card details for verification through the IPG Gateway.

parameters:
  - name: merchantId
    Datatype: Integer(18)
    Mandatory?: mandatory
    Description: The identifier for the merchant in the IPG Gateway provided at on-boarding.  This must be the same used in the related session token request.
  - name: password
    Datatype: String (64)
    Mandatory?: mandatory
    Description: The merchant’s password in the IPG Gatewayprovided at on-boarding
  - name: action
    Datatype: String(enum)
    Mandatory?: mandatory
    Description: Must be “AUTH”, “PURCHASE” or “VERIFY”For EVO Mexico/Banamex eGlobal Installments Plans this mustbe “AUTH” or “PURCHASE”; plans cannot be initiated from a “VERIFY” operatio
  - name: timestamp
    Datatype: Integer (13)
    Mandatory?: mandatory
    Description: Milliseconds since 1970-01-01 00:00:00
  - name: allowOriginUrl
    Datatype: String (253)
    Mandatory?: mandatory
    Description: The merchant's URLthat will make the Auth/Purchase/VerifyRequest(see Section Auth/Purchase/Verify Request) Cross-Origin Resource Sharing (CORS)headers will allow only this origin
  - name: quickSale
    Datatype:  Boolean
    Mandatory?: optional
    Description: A flag to indicate if a quick sale was performed where no customer information was taken.If set to TRUE:AcustomerIdwill be generated by the IPG GatewaydatabaseThecustomerAddressPostalCodeand customerAddressCountryfields should be completed for the AVS checks on the payment cardThe other‘customer’ and ‘payer’ parameters should not be supplied and willbe ignoredThe customer name in the IPG Gatewaydatabasewill be set to ‘Quick Sale’ –this will bethe indicator in the Back-Office/Virtual Terminal transactions tablesIf set to FALSE or omitted, customer information should be supplied in the ‘customer’ and ‘payer’ prefixed parameters.  Anew customer record will be created in the IPG Gatewaydatabase using thecustomerId
  - name: customerId
    Datatype: String (20)
    Mandatory?: conditional
    Description: Customer identifier in the merchant system,or the value generated by the IPG Gatewayin the TOKENIZE API Operation(see IPG Gateway–1 –TOKENIZE).This mustbe the value supplied in or by the TOKENIZE API Operation.  The value is used to validate that the payment card token is for the correct customer.If the customerIdvalue is not the same held against the payment card token in the IPG Gatewaydatabase a Session Token Response –Not Processed(section 1.3) is returned.Mandatory for payment cards methodMust not be supplied if quickSale= TRUEOptional for alternative payment methodsIf the parameter is omitted or no value is providedfor a first time use of the payment card, the IPG Gatewaywill generate a value, which will be stored internally against the payment card token and returned in the Auth/Purchase/VerifyResponse –Processed(section ...)
  - name: firstTimeTransaction
    Datatype: Boolean 
    Mandatory?: optional
    Description: A  flag to indicate if the transaction is the customer’s first. For some merchant configurations, this forces 3D Secure processing. Note - if a customerIdvalue is not provided, the IPG Gatewaywill always treat the transaction as a first-time transaction for the customer.
  - name: merchantTxId
    Datatype: String (50)
    Mandatory?: optional
    Description: The merchant’s reference for the transactionIf the parameter is empty or omitted, a transaction id will be generated by the IPG Gatewayas a hexadecimalstring, and returned in the Redirection Response and Auth/Purchase/Verify Response - Processed
  - name: freeText
    Datatype: String (200)
    Mandatory?: optional
    Description:  'A free text field for use by the merchant that is returned in the Transaction Result Call (see IPG Gateway -6 -TRANSACTION RESULT CALL: TRANSACTIONS DESCRIPTION'
    

  - name: operatorId
    Datatype: String (20)
    Mandatory?: optional
    Description: Identifier of the merchant’s operator or agent on behalf of the end customer, if the operation is not performed by the merchant, and the merchant wants to track the operator who performed the transaction
  - name: brandId
    Datatype: Integer (18)
    Mandatory?: optional
    Description: The IPG GatewayBrand Id for the merchant’s goods or services supplied at on-boardingIf not provided the merchant’s default IPG GatewayBrand Id will be used
  - name: channel
    Datatype: String (enum)
    Mandatory?: mandatory
    Description: The transaction channel through which the payment was taken:“ECOM”for card present e-commerce type transactions that are customer initiated, usually through a website checkout screen“MOTO”for card not present transactions that are merchant initiated, usually through a virtual terminal type application developed by the merchant
  - name: userDevice
    Datatype: String (enum)
    Mandatory?: optional
    Description: Type of device used, accepted values “MOBILE”“DESKTOP”“UNKNOWN” (default value if no value provided)
  - name: userAgent
    Datatype: String (1024)
    Mandatory?: optional
    Description: The user agent of the browser from which the transaction was performed, for merchant tracking if required
  - name: amount
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: The total transaction amount, including tax, shipping,surcharge and discount amountsIf action= “AUTH” or “PURCHASE”, if a value is supplied this must be > 0.00If action= “VERIFY”, this must be 0.00 or omitted See Appendix A - UAT Trigger Values
  - name: taxAmount
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Tax amountas a currency value (not percentage) If action= “VERIFY”, this must be 0.00 or omitted
  - name: shippingAmount
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Shipping amount If action= “VERIFY”, this must be 0.00 or omitted    
  - name: chargeAmount
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Surcharge amount If action= “VERIFY”, this must be 0.00 or omitted   
  - name: discountAmount
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Discount amount If action= “VERIFY”, this must be 0.00 or omitted 
  - name: currency
    Datatype: String (enum)
    Mandatory?: mandatory
    Description: The ISO alpha-3 code for the currency as defined in the ISO 4217 standard   
  - name: country
    Datatype: String (enum)
    Mandatory?: mandatory
    Description: The ISO alpha-2 code country in which the transaction takes place, as defined in the ISO 3166 standardIf this is not known or unavailable, the customerAddressCountrywill be used.
  - name: paymentSolutionId
    Datatype: Integer(18)
    Mandatory?: optional
    Description: The IPG GatewayPayment Solution IdentifierSee IPG Gateway–7 –GET AVAILABLE PAYMENT SOLUTIONSfor valid values    
  - name: language
    Datatype: String(enum)
    Mandatory?: optional
    Description: {not used by Direct API Integration merchants –used by the Hosted Payment Page integration to determine the language for the hosted payment page } 
  - name: s_text1, s_text2... s_text5
    Datatype: String(200)
    Mandatory?: optional
    Description: 5 Text fields for general use
  - name: d_date1, d_date2... d_date5
    Datatype: Date/Time
    Mandatory?: optional
    Description: 5 Date fields for general use.Format - DD/MM/YYYY hh:mm:ss–the time part can be omitted, resulting in 00:00:00
  - name: b_bool1, b_bool2... b_bool5
    Datatype: Boolean
    Mandatory?: optional
    Description: 5 Boolean fields for general use–accepted values are "true" and "false"  
  - name: n_num1, n_num2... n_num5
    Datatype: BigDecimal(7.2)
    Mandatory?: optional
    Description: 5 Numeric fields for general use–a dot “.” must be used as a decimal separator,not the comma "," and athousand separatormust not be used     
  - name: merchantNotificationUrl
    Datatype: String(200)
    Mandatory?: mandatory
    Description: The merchant’s server-to-server communications URL,to which the Transaction Result Call will be sentSee IPG Gateway –3–TRANSACTION RESULT CALLdocument  
  - name: merchantLandingPageUrl
    Datatype: String(200)
    Mandatory?: optional
    Description: The URL to which the customer’s browser is redirected for success or failure messaging 
  - name: merchantLandingPageRedirectMethod
    Datatype: String(enum)
    Mandatory?: optional
    Description: Determines the methodby which the customeris redirected to merchantLandingPage. Permitted Values‘POST’, ‘GET’ If the parameter is not included, the API process defaults to POST If the parameter is included and is ‘POST’, the API process uses POST If the parameter is included and is ‘GET’, the API process uses GET  If the parameter isincluded and is empty/blank, aSession Token Response –Not Processed(section 1.3) with an error
  - name: customerDocumentType
    Datatype: String(enum)
    Mandatory?: optional
    Description: Type of document used to confirm the customer’s identification. IPG Gatewayaccepted values- PASSPORTNATIONAL_ID DRIVING_LICENSE UNIQUE_TAXPAYER_REFERENCE OTHER
  - name: customerDocumentNumber
    Datatype: String(30)
    Mandatory?: conditional
    Description: Customer document number Condition - Mandatory if customerDocumentTypeprovide
  - name: customerDocumentState
    Datatype: String(2)
    Mandatory?: conditional
    Description: For EVOUS Sales Channel Merchants, the alpha-2 code for the State that issued the Driver’s Licence.Condition - Mandatory if merchant Sales Channel is ‘EVOUS’ and customerDocumentType= ‘DRIVING_LICENSE’ and if country= ‘US’alpha-2 code for the US State that issued the licence –see Section B.1 ‘CA’alpha-2 code for the Canadian State that issued the licence –see Section B.2 ‘MX’alpha-2 code for the Mexican State that issued the licence –see Section B.3 Elseset to NULL
  - name: merchantReference
    Datatype: String(200)
    Mandatory?: optional
    Description: The merchant’s reference for the customer
  - name: customerFirstName
    Datatype: String(50)
    Mandatory?: optional
    Description: The merchant’s reference for the customer
  - name: customerLastName
    Datatype: String(100)
    Mandatory?: optional
    Description: Last name, surname or family name of the customer
  - name: customerSex
    Datatype: String(enum)
    Mandatory?: optional
    Description: Customer Sex - M (male) F (female)
  - name: customerDateOfBirth
    Datatype: Date
    Mandatory?: optional
    Description: Customer date of birth –format DD/MM/YYYY
  - name: customerRegistrationDate
    Datatype: Date
    Mandatory?: optional
    Description: Customer registration date on merchant’s site – format DD/MM/YYYYNote - this is used for reporting and in some risk tools where required
  - name: customerEmail
    Datatype: String(60)
    Mandatory?: optional
    Description: Customer email address
  - name: customerPhone
    Datatype: String(100)
    Mandatory?: optional
    Description: Customer phone number
  - name: customerIPAddress
    Datatype: String(39)
    Mandatory?: optional
    Description: Customer IP address from where purchase is made. Only IPv4 supported
  - name: customerAddressHouseName
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer address house name
  - name: customerAddressHouseNumber
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer address house number
  - name: customerAddressFlat
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer address flat
  - name: customerAddressStreet
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer address streetThe customer’s street should be supplied whenever possible as it is used with the customerAddressPostalCodevalue for AVS (Address Verification System) Checks, and so reduce the possibility of a payment decline
  - name: customerAddressCity
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer address city
  - name: customerAddressDistrict
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer address district
  - name: customerAddressPostalCode
    Datatype: String(30)
    Mandatory?: conditional
    Description: Customer address postal codeCondition - If quickSale= TRUE, customerAddressPostalCodeis mandatoryThe customer’s postal code (postcode/ZIP Code) should be supplied whenever possible as it is used with the customerAddressStreetvalue for AVS (Address Verification System) Checks, and so reduce the possibility of a payment decline
  - name: customerAddressCountry
    Datatype: String(enum)
    Mandatory?: optional
    Description: Customer address countryThe ISO alpha-2 code as defined in the ISO 3166 standard. Note - this will be used if country field is not supplied
  - name: customerAddressState
    Datatype: String(40)
    Mandatory?: optional
    Description: Customer address state, county or province
  - name: customerAddressPhone
    Datatype: String(100)
    Mandatory?: optional
    Description: Customer address phone
  - name: customerShippingAddressHouseName
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer shipping address house name
  - name: customerShippingAddressHouseNumber
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer shipping address house number
  - name: customerShippingAddressFlat
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer shipping address flat
  - name: customerShippingAddressStreet
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer shipping address street
  - name: customerShippingAddressCity
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer shipping address city
  - name: customerShippingAddressDistrict
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer shipping address district
  - name: customerShippingAddressPostalCode
    Datatype: String(30)
    Mandatory?: optional
    Description: Customer shipping address postal code
  - name: customerShippingAddressCountry
    Datatype: String(enum)
    Mandatory?: optional
    Description: Customer shipping address countryThe ISO alpha-2 code as defined in the ISO 3166 standard
  - name: customerShippingAddressState
    Datatype: String(40)
    Mandatory?: optional
    Description: Customer shipping address state, county or province
  - name: customerShippingAddressPhone
    Datatype: String(100)
    Mandatory?: optional
    Description: Customer shipping address phone
  - name: customerBillingAddressHouseName
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer billing address house name
  - name: customerBillingAddressHouseNumber
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer billing address house number
  - name: customerBillingAddressFlat
    Datatype: String(5)
    Mandatory?: optional
    Description: Customer billing address flat
  - name: customerBillingAddressStreet
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer billing address street
  - name: customerBillingAddressCity
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer billing address city
  - name: customerBillingAddressDisctrict
    Datatype: String(50)
    Mandatory?: optional
    Description: Customer billing address district
  - name: customerBillingAddressPostalCode
    Datatype: String(30)
    Mandatory?: optional
    Description: Customer billing address postal code
  - name: customerBillingAddressCountry
    Datatype: String(enum)
    Mandatory?: optional
    Description: Customer billing address countryThe ISO alpha-2 code as defined in the ISO 3166 standard
  - name: customerBillingAddressState
    Datatype: String(40)
    Mandatory?: optional
    Description: Customer billing address state
  - name: customerBillingAddressPhone
    Datatype: String(100)
    Mandatory?: optional
    Description: Customer billing address phone
  - name: payerFirstName
    Datatype: String(50)
    Mandatory?: optional
    Description: Payer first name, if the Payee is different to the CustomerRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerLastName
    Datatype: String(100)
    Mandatory?: optional
    Description: Payer last name, if the Payee is different to the CustomerRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerEmail
    Datatype: String(60)
    Mandatory?: optional
    Description: Payer email, if the Payee is different to the CustomerRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerDateOfBirth
    Datatype: Date
    Mandatory?: optional
    Description: Payer date of birth, if the Payee is different to the CustomerRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerPhone
    Datatype: String(100)
    Mandatory?: optional
    Description: Payer phone, if the Payee is different to the CustomerRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerDocumentType
    Datatype: String(enum)
    Mandatory?: optional
    Description: Type of document used to confirm the payer’s identification, if the Payee is different to the CustomerIPG Gatewayaccepted values - PASSPORT NATIONAL_ID DRIVING_LICENSE UTR OTHER. Required by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerDocumentNumber
    Datatype: String(30)
    Mandatory?: conditional
    Description: Payer document number, if the Payee is different to the CustomerCondition - Mandatory if payerDocumentTypeprovidedRequired by some regions and payment services, e.g. PayU Latam in Brazil
  - name: payerCustomerId
    Datatype: String(20)
    Mandatory?: optional
    Description: Customer identifier of the payee in the merchant’s systemRequired by some regions and payment services, e.g. PayU Latam in Brazil, if the payee is also a customer of the merchant
  - name: forceSecurePayment
    Datatype: Boolean
    Mandatory?: optional
    Description: For payment card transactionsonly, if the merchant has 3D Secure disabled for all transactions as a rule, this field can be used to force 3d Secure processing for individual transactions- If True - forces 3DSecure processing no matter the routing rules If False, not provided or NULL - the 3D Secure routing rules in the IPG Gatewayare usedIf 3D Secure processing is required, the Redirection Response is sent
  - name: processUnknownSecurePayment
    Datatype: Boolean
    Mandatory?: optional
    Description: For payment card transactions, this determines how "U" (Unknown) responses from the 3D Secure process are managed:If True and blockU is True:the transaction will be stopped in the IPG Gatewayand a Session Token Response –Not Processed(section 1.3) is returned
  - name: specinCreditCardToken
    Datatype: String(100)
    Mandatory?: optional
    Description: The payment card token received in the TOKENIZE API Operation, see IPG Gateway –1 –TOKENIZE For OneClick transactions this mustbe the data.oneClickPaymentMethods.payToken returned in the Get OneClick Payment Methods Response –Processed
  - name: specinProcessWithoutCvv2
    Datatype: Boolean
    Mandatory?: optional
    Description: A flag that indicates whether the payment card transaction is to be processed with or without the Card Security Code (CSC also called Card Verification Data [CVD], Card Verification Number, Card Verification Value [CVV], Card Verification Value Code, Card Verification Code [CVC], Verification Code [V-code or V code], or Signature Panel Code [SPC])This requires prior authorization by the IPG Gatewayand acquirer.
  - name: bankMid
    Datatype: String(50)
    Mandatory?: optional
    Description: The merchant’s Bank MID with the Acquirer.Used by the merchant to control which acquirer bank MID will be used for the transaction.
  - name: storeCard
    Datatype: Boolean
    Mandatory?: optional
    Description: Determines how the payment card data is stored in the IPG Gateway.  Payment card data is always stored in the IPG Gatewayfor legislative and regulatorypurposes.This flag determines if the card remains active for use in the IPG Gateway - If False the payment card is set to inactive If True or Missing the payment card is set to active
  - name: limitMin
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Sets a minimum transaction value allowed to be processed in the IPG GatewayThis overrides the minimum value set in the IPG Gatewaymerchant configurationIt is the merchant’s responsibility to set a value that will be accepted by the Acquirer and Issuer involved in the transaction process
  - name: limitMax
    Datatype: BigDecimal(15.2 or 15.3)
    Mandatory?: optional
    Description: Sets a maximum transaction value allowed to be processed in the IPG GatewayThis overrides the maximum value set in the IPG Gateway merchant configuration. It is the merchant’s responsibility to set a value that will be accepted by the Acquirer and Issuer involved in the transaction process


left_code_blocks:
  - code_block: |-
      $ .post("https://apiuat.test.boipapaymentgateway.com/payment?"> {
      merchantId=1111111&password=klw74U6yt40mNo&merchantTxId=XYZ123456789ABC&allowOriginUrl=www.merchantsite.com&action=AUTH&timestamp=1249751864238&customerId=ABD123&operatorId=brian01&brandId=987654321&channel=ECOM&userDevice=DESKTOP&amount=120&taxAmount=10&shippingAmount=15&chargeAmount=5&discountAmount=10&currency=GBP&country=GB&paymentSolutionId=500&language=en&merchantNotificationUrl=www.merchantsite.com&merchantLandingPageUrl=www.merchant.com&firstTimeTransaction=Y&customerDocumentType=PASSPORT&customerDocumentNumber=12345678&merchantReference=ABC123546&customerFirstName=John&customerLastName=Smith&customerSex=M&customerDateOfBirth0=01/01/1999&customerRegistrationDate=01/01/2017&customerEmail=john.smith@email.com&customerPhone=079525551234&customerIPAddress=111.111.111.111&customerAddressHouseName=House+Name&customerAddressHouseNumber=1&customerAddressFlat=3&customerAddressStreet=Street+Name&customerAddressCity=London&customerAddressDistrict=Mayfair&customerAddressPostalCode=W1A+A11&customerAddressCountry=United+Kingdom&customerAddressState=London&customerAddressPhone=00442025551234&forceSecurePayment=True&processUnknownSecurePayment=True&specinCreditCardToken=45ae201ghy23498FjMj701&specinProcessWithoutCvv2=False&bankMid=01000320_MOTO+EUR+Test+Bank+MID&storeCard=False
      };
    title: jQuery
    language: javascript
  
right_code_blocks:
  - code_block: |2-
      {
        "result": "success",
        "resultId": "f52cc38a-7815-4f8c-8687-662cc63d56e9",
        "merchantId": "1111111",
        "additionalDetails": {},
        "processingTime": 0,
        "token": "96b7d82e-349f-4880-9b8a-928636437c75"
        }
    title: Success
    language: json
  - code_block: |2-
      {
        "result": "failure",
        "resultId": "bb248d1d-d657-4dbe-9f04-a279b384872c",
        "additionalDetails": {},
        "errors": 
        [
          {
          "messageCode": "This field is required in [REQUEST]",
          "fieldName": "password"
          }
        ],
      "processingTime": 2
      }
    title: Error
    language: json
---